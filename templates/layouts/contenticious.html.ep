<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <% my $t = join ' - ' => grep { $_ } stash('title'), config('name'); %>
    <title><%= $t || 'contenticious!' %></title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="/styles/contenticious.css" />
    <link rel="stylesheet" type="text/css" href="/styles/mojolicious.css" />
	
  	<link rel='stylesheet' type='text/css' href='/fonts/font-test.b64.css' />
	<link rel='stylesheet' type='text/css' href='/styles/main.css' />
  	<link rel='stylesheet' type='text/css' href='/styles/width.css' />
  
  	<!--script type="text/javascript" src="/libs/angular/dist/angular.min.js"></script-->
  	<!--script type="text/javascript" src="/libs/jquery/dist/jquery.min.js"></script-->
  	<!--script type="text/javascript" src="/libs/jquery-cycle/build/jquery.cycle2.min.js"></script-->
	
</head>
<body>
  <div id="uni-sol" style="min-width:460px">
  	<div>
  		<img id="layer1" alt="Blue Earth from Space" width="100%" src="/images/PlanetEarthBluePlanet.png" />
  	</div>

	<% if (config 'copyright') { %>
	<p id="copyright">
		&copy;
		<%= 1900 + (localtime)[5] %>
		<%= config 'copyright' %>
	</p>
	<% } %>
	<p id="built_with">
		...built with
		<a href="http://memowe.github.com/contenticious">contenticious</a>.
	</p><!--footer -->
  </div>

  <div id="transparent_background" style="min-width:460px"></div>
  <div id="home_screen" style="min-width:460px">
	  <div id="trademark">
							Integrative:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Web:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apps:<br />     
	  </div>
	  
	  <div id="title" class="titles" style="min-width:460px">
		<h1><%
	{ 
		no strict 'vars';
		if( defined $header ) {
			%><%= $header %><%
		} else { 
			%><a href="/">
				<span style="color:#00FF00">Real</span><span style="color:rgb(17,187,255)">~Currents</span>
			</a><%
		}
	}	
		%></h1><br />
			<!--span id='mode'>reading: </span><a id='read_site' href=''></a-->
		</div>

		<div id="content" style="min-width:460px">
%= content


  
<script type="text/javascript" src="/scripts/Debugger.js"></script>
<script type="text/javascript" src="/scripts/control.js"></script>
<% 
{ 
	no strict 'vars';
  	if( defined $canvasApp ){ 
	# If URI for a Canvas app is provided, initialize "uni-sol">"layer1"
%><a id="js-demos" href="https://github.com/Revlin/js-demos#readme"></a>
<script type="text/javascript" id="cvSrc" src="<%= $canvasApp %>"></script>
<script type="text/javascript">
	function load() {
		
		if (typeof Debugger === "function") { 
			//Debugger.on = false;
		} else {
			window.Debugger = {
				log: function() {
					/* no debugger.js */
				}
			};
		}
		
		/* Find the developer heading and update the value */
		jQuery('h1').each(function(idx) {
			if( this.innerHTML.match(/developer/) !== null ) {
				this.innerHTML = ( window.location.toString().match(/uni-sol/) !== null )?
								"Revlin John":
								"John Hall";
			}
		} );
		var canvas=document.createElement("canvas");
		canvas.width = ( window.innerWidth > 1024 )? 1024: window.innerWidth; //document.getElementById("layer1").getAttribute('width');
		canvas.height = 9*canvas.width/16; //document.getElementById("layer1").getAttribute('height');
		document.getElementById('uni-sol').children[0].replaceChild( canvas, document.getElementById("layer1") );
		canvas.addEventListener( "click", function(evt) {
			var git_link = document.getElementById("js-demos");
			git_link.target = "_blank";
			event = document.createEvent( "MouseEvent" );
			event.initEvent( evt.type, true, true );
			for( var e
			in evt ){
				event[e] = evt[e];
			}
			evt.preventDefault();
			git_link.dispatchEvent(event, true);
		}, false );
		canvasApp(canvas);
		if( typeof jQuery === "function" ) {
			jQuery('.cycle-slideshow').cycle('goto', 1);
			jQuery('.cycle-slideshow').cycle('pause');
		}
		

<%
	} elsif( defined $svgApp ) { 
	# If URI for an SVG file is provided, initialize "uni-sol">"layer1"
%>
<script type="text/javascript">
	function load() {
		
		if (typeof Debugger === "function") { 
			//Debugger.on = false;
		} else {
			window.Debugger = {
				log: function() {
					/* no debugger.js */
				}
			};
		}
		
		/* Find the developer heading and update the value */
		jQuery('h1').each(function(idx) {
			if( this.innerHTML.match(/developer/) !== null ) {
				this.innerHTML = ( window.location.toString().match(/uni-sol/) !== null )?
								"Revlin John":
								"John Hall";
			}
		} );
		
		if( typeof jQuery === "function" && (window.navigator.userAgent.match(/Android/) === null) ) {
			document.getElementById("layer1").src = "<%= $svgApp %>";
			jQuery('.cycle-slideshow').cycle('goto', 1);
			jQuery('.cycle-slideshow').cycle('pause');
		}
		
		return;
		
	
<%
	} else {
%>
<script type="text/javascript">
	function load() {
		
		if (typeof Debugger === "function") { 
			//Debugger.on = false;
		} else {
			window.Debugger = {
				log: function() {
					/* no debugger.js */
				}
			};
		}
		
		/* Find the developer heading and update the value */
		jQuery('h1').each(function(idx) {
			Debugger.log( this.innerHTML.match(/developer/) );
			if( this.innerHTML.match(/developer/) !== null ) {
				this.innerHTML = ( window.location.toString().match(/uni-sol/) !== null )?
								"Revlin John":
								"John Hall";
			}
		} );
<%
	}
%>
	}
</script>
<%
} 
%>
			<div id='mojo-version'>
				<p><img src="/images/triad.png" /></p>
				<a href="http://Mojolicio.us">Mojolicious</a><br /> 
			</div>
			<br /><br /><br />
		</div><!-- content -->
  </div>
  
</body>
</html>
